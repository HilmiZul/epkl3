{% extends "layout_admin/base.html" %}

{% block content %}
<section class="form-table">
  <div class="container">
    <div class="row">
      <div class="col l12">
        <h4>Pengajuan Judul</h4>

        {% if messages %}
          {% for message in messages %}
            <div class="card-panel teal lighten-5">
              {{ message }}
              <i class="material-icons left">check</i>
            </div>
          {% endfor %}
        {% endif %}
        <table class="responsive-table" id="myTable">
          <thead>
            <tr>
              <th>NO.</th>
              <th>JUDUL</th>
              <th>NAMA</th>
              <th>KELAS</th>
              <th>STATUS</th>
              <th>AKSI</th>
            </tr>
          </thead>
          <tbody>
            {% for karil in judul %}
            <tr>
              <td>{{ forloop.counter }}.</td>
              <td>{{ karil.judul }}</td>
              <td>{{ karil.siswa.profil }}</td>
              <td>{{ karil.siswa.profil.kelas }}</td>
              <td>
                {% if karil.status == 'Menunggu' %}
                <span class="btn red lighten-2">{{ karil.status }}</span>
                {% elif karil.status == 'Ditolak' %}
                <span class="btn red lighten-2">{{ karil.status }}</span>
                {% else %}
                <span class="btn purple darken-1">{{ karil.status }}</span>
                {% endif %}
              </td>
              <td>
                {% if karil.status == 'Menunggu' %}
                <a href="#setuju-{{ karil.id }}" class="btn teal darken-2 waves-effect waves-light modal-trigger">
                  <i class="material-icons">done</i>
                </a>
                <a href="#tolak-{{ karil.id }}" class="btn red darken-2 waves-effect waves-light modal-trigger">
                  <i class="material-icons">cancel</i>
                </a>
                {% elif karil.status == 'Disetujui' %}
                  <em>Tidak ada aksi</em>
                {% elif karil.status == 'Ditolak' %}
                  <em>Tidak ada aksi</em>
                {% endif %}
              </td>
            </tr>
            <div class="modal" id="setuju-{{ karil.id }}">
              <form action="/portofolio/pengajuan-judul/setuju/{{ karil.id }}" method="post">
                {% csrf_token %}
                <div class="modal-content">
                  <h4>Setujui?</h4>
                  <p>
                    Apakah Anda yakin akan menyetujui Judul Karya Ilmiah ini?
                  </p>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn waves-effect">
                    Ya, Setujui
                  </button>
                  <a href="#!" class="modal-close btn-flat waves-effect">ENGGA</a>
                </div>
              </form>
            </div>
            <div class="modal" id="tolak-{{ karil.id }}">
              <form action="/portofolio/pengajuan-judul/tolak/{{ karil.id }}" method="post">
                {% csrf_token %}
                <div class="modal-content">
                  <h4>Tolak?</h4>
                  <p>
                    Apakah Anda yakin akan menolak/mengembalikan pengajuan judul ini?
                  </p>
                  <b>{{ karil.judul }}</b>
                  <div class="input-field">
                    <label for="catatan">Tulis tanggapan disini... (harus diisi)</label>
                    <textarea name="catatan" id="catatan" class="materialize-textarea" required="required"></textarea>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="modal-close btn-flat waves-effect">
                    Ya, Kembalikan
                  </button>
                  <a href="#!" class="modal-close btn waves-effect waves-light">ENGGA</a>
                </div>
              </form>
            </div>
            {% endfor %}
          </tbody>
        </table>
      </div> <!-- ./col -->
    </div> <!-- ./row -->
  </div>
</section>
{% endblock %}